{% extends "base.html" %}
{% block body %}

{% if session.logged_in %}
<aside>
    <form action="{{ url_for('add_entry') }} "method="POST" class="add_entry">
        <div class="field">
            <label for="title">Title</label>
            <input type="test" size="30" name="title" id="title"/>
        </div><!-- /field -->
        <div class="field">
            <label for="text">Text</label>
            <textarea name="text" id="text" rows="5" cols="80" value="hi"></textarea>
        </div><!-- /field -->
        <div class="control_row">
            <input type="submit" value="Share" name="Share"/>
        </div><!-- /control-row -->
    </form>
</aside>
{% endif %}
    <h2>Entries</h2>
    {% for entry in entries %}
        <article class="entry" id="entry={{entry.id}}">
            <a href="{{url_for('show_single_entry', id=entry.id)}}"><h3>{{ entry.title }}</h3></a>
            <p class="dateline">{{ entry.created.strftime('%b, %d, %Y') }}</p>
            <div class="entry_body">
                {{ entry.text|safe}}
            <ul class="share">
            <li><a href="https://twitter.com/share/" data-url="http://127.0.0.1:5000{{url_for('show_single_entry', id=entry.id)}}" data-text="{{entry.title}}"
                   class="twitter-share-button">Tweet</a></li>
            </ul>
                <script>
                !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id))
                {js=d.createElement(s);js.id=id;js.src="http://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
                </script>
            </div>
            {% if session.logged_in %}
                <ul class="edit-links">
                    <li><a href="edit/{{ entry.id }}">Edit</a></li>
                    <li><a href="{{url_for('delete_entry', id=entry.id)}}" class='confirmation'>Delete</a></li>
                </ul>
            {% endif %}
        </article>
    {% else %}
        <div class="entry">
            <p><em>No entries here so far</em></p>
        </div>
  {% endfor %}

{% endblock %}